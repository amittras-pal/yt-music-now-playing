import{R as B,r as ne,j as g,I as pt}from"./index-b5cwbGPv.js";import{g as _t,c as Vt}from"./form-5eREmOD0.js";var ue=e=>e.type==="checkbox",re=e=>e instanceof Date,T=e=>e==null;const st=e=>typeof e=="object";var E=e=>!T(e)&&!Array.isArray(e)&&st(e)&&!re(e),kt=e=>E(e)&&e.target?ue(e.target)?e.target.checked:e.target.value:e,At=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,wt=(e,i)=>e.has(At(i)),Ft=e=>{const i=e.constructor&&e.constructor.prototype;return E(i)&&i.hasOwnProperty("isPrototypeOf")},Ce=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function z(e){let i;const s=Array.isArray(e);if(e instanceof Date)i=new Date(e);else if(e instanceof Set)i=new Set(e);else if(!(Ce&&(e instanceof Blob||e instanceof FileList))&&(s||E(e)))if(i=s?[]:{},!s&&!Ft(e))i=e;else for(const r in e)e.hasOwnProperty(r)&&(i[r]=z(e[r]));else return e;return i}var ce=e=>Array.isArray(e)?e.filter(Boolean):[],N=e=>e===void 0,y=(e,i,s)=>{if(!i||!E(e))return s;const r=ce(i.split(/[,[\].]+?/)).reduce((o,n)=>T(o)?o:o[n],e);return N(r)||r===e?N(e[i])?s:e[i]:r},J=e=>typeof e=="boolean";const $e={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},q={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},$={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};B.createContext(null);var St=(e,i,s,r=!0)=>{const o={defaultValues:i._defaultValues};for(const n in e)Object.defineProperty(o,n,{get:()=>{const u=n;return i._proxyFormState[u]!==q.all&&(i._proxyFormState[u]=!r||q.all),s&&(s[u]=!0),e[u]}});return o},M=e=>E(e)&&!Object.keys(e).length,Dt=(e,i,s,r)=>{s(e);const{name:o,...n}=e;return M(n)||Object.keys(n).length>=Object.keys(i).length||Object.keys(n).find(u=>i[u]===(!r||q.all))},Se=e=>Array.isArray(e)?e:[e];function Nt(e){const i=B.useRef(e);i.current=e,B.useEffect(()=>{const s=!e.disabled&&i.current.subject&&i.current.subject.subscribe({next:i.current.next});return()=>{s&&s.unsubscribe()}},[e.disabled])}var K=e=>typeof e=="string",Et=(e,i,s,r,o)=>K(e)?(r&&i.watch.add(e),y(s,e,o)):Array.isArray(e)?e.map(n=>(r&&i.watch.add(n),y(s,n))):(r&&(i.watchAll=!0),s),Oe=e=>/^\w*$/.test(e),it=e=>ce(e.replace(/["|']|\]/g,"").split(/\.|\[/)),k=(e,i,s)=>{let r=-1;const o=Oe(i)?[i]:it(i),n=o.length,u=n-1;for(;++r<n;){const x=o[r];let h=s;if(r!==u){const A=e[x];h=E(A)||Array.isArray(A)?A:isNaN(+o[r+1])?{}:[]}e[x]=h,e=e[x]}return e},at=(e,i,s,r,o)=>i?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[r]:o||!0}}:{},ze=e=>({isOnSubmit:!e||e===q.onSubmit,isOnBlur:e===q.onBlur,isOnChange:e===q.onChange,isOnAll:e===q.all,isOnTouch:e===q.onTouched}),Je=(e,i,s)=>!s&&(i.watchAll||i.watch.has(e)||[...i.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const oe=(e,i,s,r)=>{for(const o of s||Object.keys(e)){const n=y(e,o);if(n){const{_f:u,...x}=n;if(u){if(u.refs&&u.refs[0]&&i(u.refs[0],o)&&!r)break;if(u.ref&&i(u.ref,u.name)&&!r)break;oe(x,i)}else E(x)&&oe(x,i)}}};var jt=(e,i,s)=>{const r=ce(y(e,s));return k(r,"root",i[s]),k(e,s,r),e},Le=e=>e.type==="file",Z=e=>typeof e=="function",ge=e=>{if(!Ce)return!1;const i=e?e.ownerDocument:0;return e instanceof(i&&i.defaultView?i.defaultView.HTMLElement:HTMLElement)},me=e=>K(e),Te=e=>e.type==="radio",ve=e=>e instanceof RegExp;const Ze={value:!1,isValid:!1},Qe={value:!0,isValid:!0};var nt=e=>{if(Array.isArray(e)){if(e.length>1){const i=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:i,isValid:!!i.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!N(e[0].attributes.value)?N(e[0].value)||e[0].value===""?Qe:{value:e[0].value,isValid:!0}:Qe:Ze}return Ze};const Xe={isValid:!1,value:null};var lt=e=>Array.isArray(e)?e.reduce((i,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:i,Xe):Xe;function Ye(e,i,s="validate"){if(me(e)||Array.isArray(e)&&e.every(me)||J(e)&&!e)return{type:s,message:me(e)?e:"",ref:i}}var te=e=>E(e)&&!ve(e)?e:{value:e,message:""},et=async(e,i,s,r,o)=>{const{ref:n,refs:u,required:x,maxLength:h,minLength:A,min:_,max:S,pattern:v,validate:D,name:U,valueAsNumber:pe,mount:fe,disabled:_e}=e._f,b=y(i,U);if(!fe||_e)return{};const R=u?u[0]:n,G=p=>{r&&R.reportValidity&&(R.setCustomValidity(J(p)?"":p||""),R.reportValidity())},j={},de=Te(n),se=ue(n),ie=de||se,Y=(pe||Le(n))&&N(n.value)&&N(b)||ge(n)&&n.value===""||b===""||Array.isArray(b)&&!b.length,P=at.bind(null,U,s,j),ye=(p,V,F,L=$.maxLength,W=$.minLength)=>{const I=p?V:F;j[U]={type:p?L:W,message:I,ref:n,...P(p?L:W,I)}};if(o?!Array.isArray(b)||!b.length:x&&(!ie&&(Y||T(b))||J(b)&&!b||se&&!nt(u).isValid||de&&!lt(u).isValid)){const{value:p,message:V}=me(x)?{value:!!x,message:x}:te(x);if(p&&(j[U]={type:$.required,message:V,ref:R,...P($.required,V)},!s))return G(V),j}if(!Y&&(!T(_)||!T(S))){let p,V;const F=te(S),L=te(_);if(!T(b)&&!isNaN(b)){const W=n.valueAsNumber||b&&+b;T(F.value)||(p=W>F.value),T(L.value)||(V=W<L.value)}else{const W=n.valueAsDate||new Date(b),I=he=>new Date(new Date().toDateString()+" "+he),ae=n.type=="time",Q=n.type=="week";K(F.value)&&b&&(p=ae?I(b)>I(F.value):Q?b>F.value:W>new Date(F.value)),K(L.value)&&b&&(V=ae?I(b)<I(L.value):Q?b<L.value:W<new Date(L.value))}if((p||V)&&(ye(!!p,F.message,L.message,$.max,$.min),!s))return G(j[U].message),j}if((h||A)&&!Y&&(K(b)||o&&Array.isArray(b))){const p=te(h),V=te(A),F=!T(p.value)&&b.length>+p.value,L=!T(V.value)&&b.length<+V.value;if((F||L)&&(ye(F,p.message,V.message),!s))return G(j[U].message),j}if(v&&!Y&&K(b)){const{value:p,message:V}=te(v);if(ve(p)&&!b.match(p)&&(j[U]={type:$.pattern,message:V,ref:n,...P($.pattern,V)},!s))return G(V),j}if(D){if(Z(D)){const p=await D(b,i),V=Ye(p,R);if(V&&(j[U]={...V,...P($.validate,V.message)},!s))return G(V.message),j}else if(E(D)){let p={};for(const V in D){if(!M(p)&&!s)break;const F=Ye(await D[V](b,i),R,V);F&&(p={...F,...P(V,F.message)},G(F.message),s&&(j[U]=p))}if(!M(p)&&(j[U]={ref:R,...p},!s))return j}}return G(!0),j};function Ct(e,i){const s=i.slice(0,-1).length;let r=0;for(;r<s;)e=N(e)?r++:e[i[r++]];return e}function Ot(e){for(const i in e)if(e.hasOwnProperty(i)&&!N(e[i]))return!1;return!0}function O(e,i){const s=Array.isArray(i)?i:Oe(i)?[i]:it(i),r=s.length===1?e:Ct(e,s),o=s.length-1,n=s[o];return r&&delete r[n],o!==0&&(E(r)&&M(r)||Array.isArray(r)&&Ot(r))&&O(e,s.slice(0,-1)),e}var De=()=>{let e=[];return{get observers(){return e},next:o=>{for(const n of e)n.next&&n.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(n=>n!==o)}}),unsubscribe:()=>{e=[]}}},xe=e=>T(e)||!st(e);function X(e,i){if(xe(e)||xe(i))return e===i;if(re(e)&&re(i))return e.getTime()===i.getTime();const s=Object.keys(e),r=Object.keys(i);if(s.length!==r.length)return!1;for(const o of s){const n=e[o];if(!r.includes(o))return!1;if(o!=="ref"){const u=i[o];if(re(n)&&re(u)||E(n)&&E(u)||Array.isArray(n)&&Array.isArray(u)?!X(n,u):n!==u)return!1}}return!0}var ot=e=>e.type==="select-multiple",Lt=e=>Te(e)||ue(e),Ne=e=>ge(e)&&e.isConnected,ut=e=>{for(const i in e)if(Z(e[i]))return!0;return!1};function be(e,i={}){const s=Array.isArray(e);if(E(e)||s)for(const r in e)Array.isArray(e[r])||E(e[r])&&!ut(e[r])?(i[r]=Array.isArray(e[r])?[]:{},be(e[r],i[r])):T(e[r])||(i[r]=!0);return i}function ct(e,i,s){const r=Array.isArray(e);if(E(e)||r)for(const o in e)Array.isArray(e[o])||E(e[o])&&!ut(e[o])?N(i)||xe(s[o])?s[o]=Array.isArray(e[o])?be(e[o],[]):{...be(e[o])}:ct(e[o],T(i)?{}:i[o],s[o]):s[o]=!X(e[o],i[o]);return s}var Ee=(e,i)=>ct(e,i,be(i)),ft=(e,{valueAsNumber:i,valueAsDate:s,setValueAs:r})=>N(e)?e:i?e===""?NaN:e&&+e:s&&K(e)?new Date(e):r?r(e):e;function je(e){const i=e.ref;if(!(e.refs?e.refs.every(s=>s.disabled):i.disabled))return Le(i)?i.files:Te(i)?lt(e.refs).value:ot(i)?[...i.selectedOptions].map(({value:s})=>s):ue(i)?nt(e.refs).value:ft(N(i.value)?e.ref.value:i.value,e)}var Tt=(e,i,s,r)=>{const o={};for(const n of e){const u=y(i,n);u&&k(o,n,u._f)}return{criteriaMode:s,names:[...e],fields:o,shouldUseNativeValidation:r}},le=e=>N(e)?e:ve(e)?e.source:E(e)?ve(e.value)?e.value.source:e.value:e,Ut=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function tt(e,i,s){const r=y(e,s);if(r||Oe(s))return{error:r,name:s};const o=s.split(".");for(;o.length;){const n=o.join("."),u=y(i,n),x=y(e,n);if(u&&!Array.isArray(u)&&s!==n)return{name:s};if(x&&x.type)return{name:n,error:x};o.pop()}return{name:s}}var Mt=(e,i,s,r,o)=>o.isOnAll?!1:!s&&o.isOnTouch?!(i||e):(s?r.isOnBlur:o.isOnBlur)?!e:(s?r.isOnChange:o.isOnChange)?e:!0,Rt=(e,i)=>!ce(y(e,i)).length&&O(e,i);const Pt={mode:q.onSubmit,reValidateMode:q.onChange,shouldFocusError:!0};function It(e={},i){let s={...Pt,...e},r={submitCount:0,isDirty:!1,isLoading:Z(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:s.errors||{},disabled:!1},o={},n=E(s.defaultValues)||E(s.values)?z(s.defaultValues||s.values)||{}:{},u=s.shouldUnregister?{}:z(n),x={action:!1,mount:!1,watch:!1},h={mount:new Set,unMount:new Set,array:new Set,watch:new Set},A,_=0;const S={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},v={values:De(),array:De(),state:De()},D=e.resetOptions&&e.resetOptions.keepDirtyValues,U=ze(s.mode),pe=ze(s.reValidateMode),fe=s.criteriaMode===q.all,_e=t=>a=>{clearTimeout(_),_=setTimeout(t,a)},b=async t=>{if(S.isValid||t){const a=s.resolver?M((await P()).errors):await p(o,!0);a!==r.isValid&&v.state.next({isValid:a})}},R=t=>S.isValidating&&v.state.next({isValidating:t}),G=(t,a=[],l,d,f=!0,c=!0)=>{if(d&&l){if(x.action=!0,c&&Array.isArray(y(o,t))){const m=l(y(o,t),d.argA,d.argB);f&&k(o,t,m)}if(c&&Array.isArray(y(r.errors,t))){const m=l(y(r.errors,t),d.argA,d.argB);f&&k(r.errors,t,m),Rt(r.errors,t)}if(S.touchedFields&&c&&Array.isArray(y(r.touchedFields,t))){const m=l(y(r.touchedFields,t),d.argA,d.argB);f&&k(r.touchedFields,t,m)}S.dirtyFields&&(r.dirtyFields=Ee(n,u)),v.state.next({name:t,isDirty:F(t,a),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else k(u,t,a)},j=(t,a)=>{k(r.errors,t,a),v.state.next({errors:r.errors})},de=t=>{r.errors=t,v.state.next({errors:r.errors,isValid:!1})},se=(t,a,l,d)=>{const f=y(o,t);if(f){const c=y(u,t,N(l)?y(n,t):l);N(c)||d&&d.defaultChecked||a?k(u,t,a?c:je(f._f)):I(t,c),x.mount&&b()}},ie=(t,a,l,d,f)=>{let c=!1,m=!1;const w={name:t},C=!!(y(o,t)&&y(o,t)._f.disabled);if(!l||d){S.isDirty&&(m=r.isDirty,r.isDirty=w.isDirty=F(),c=m!==w.isDirty);const H=C||X(y(n,t),a);m=!!(!C&&y(r.dirtyFields,t)),H||C?O(r.dirtyFields,t):k(r.dirtyFields,t,!0),w.dirtyFields=r.dirtyFields,c=c||S.dirtyFields&&m!==!H}if(l){const H=y(r.touchedFields,t);H||(k(r.touchedFields,t,l),w.touchedFields=r.touchedFields,c=c||S.touchedFields&&H!==l)}return c&&f&&v.state.next(w),c?w:{}},Y=(t,a,l,d)=>{const f=y(r.errors,t),c=S.isValid&&J(a)&&r.isValid!==a;if(e.delayError&&l?(A=_e(()=>j(t,l)),A(e.delayError)):(clearTimeout(_),A=null,l?k(r.errors,t,l):O(r.errors,t)),(l?!X(f,l):f)||!M(d)||c){const m={...d,...c&&J(a)?{isValid:a}:{},errors:r.errors,name:t};r={...r,...m},v.state.next(m)}R(!1)},P=async t=>s.resolver(u,s.context,Tt(t||h.mount,o,s.criteriaMode,s.shouldUseNativeValidation)),ye=async t=>{const{errors:a}=await P(t);if(t)for(const l of t){const d=y(a,l);d?k(r.errors,l,d):O(r.errors,l)}else r.errors=a;return a},p=async(t,a,l={valid:!0})=>{for(const d in t){const f=t[d];if(f){const{_f:c,...m}=f;if(c){const w=h.array.has(c.name),C=await et(f,u,fe,s.shouldUseNativeValidation&&!a,w);if(C[c.name]&&(l.valid=!1,a))break;!a&&(y(C,c.name)?w?jt(r.errors,C,c.name):k(r.errors,c.name,C[c.name]):O(r.errors,c.name))}m&&await p(m,a,l)}}return l.valid},V=()=>{for(const t of h.unMount){const a=y(o,t);a&&(a._f.refs?a._f.refs.every(l=>!Ne(l)):!Ne(a._f.ref))&&ke(t)}h.unMount=new Set},F=(t,a)=>(t&&a&&k(u,t,a),!X(Me(),n)),L=(t,a,l)=>Et(t,h,{...x.mount?u:N(a)?n:K(t)?{[t]:a}:a},l,a),W=t=>ce(y(x.mount?u:n,t,e.shouldUnregister?y(n,t,[]):[])),I=(t,a,l={})=>{const d=y(o,t);let f=a;if(d){const c=d._f;c&&(!c.disabled&&k(u,t,ft(a,c)),f=ge(c.ref)&&T(a)?"":a,ot(c.ref)?[...c.ref.options].forEach(m=>m.selected=f.includes(m.value)):c.refs?ue(c.ref)?c.refs.length>1?c.refs.forEach(m=>(!m.defaultChecked||!m.disabled)&&(m.checked=Array.isArray(f)?!!f.find(w=>w===m.value):f===m.value)):c.refs[0]&&(c.refs[0].checked=!!f):c.refs.forEach(m=>m.checked=m.value===f):Le(c.ref)?c.ref.value="":(c.ref.value=f,c.ref.type||v.values.next({name:t,values:{...u}})))}(l.shouldDirty||l.shouldTouch)&&ie(t,f,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&Ve(t)},ae=(t,a,l)=>{for(const d in a){const f=a[d],c=`${t}.${d}`,m=y(o,c);(h.array.has(t)||!xe(f)||m&&!m._f)&&!re(f)?ae(c,f,l):I(c,f,l)}},Q=(t,a,l={})=>{const d=y(o,t),f=h.array.has(t),c=z(a);k(u,t,c),f?(v.array.next({name:t,values:{...u}}),(S.isDirty||S.dirtyFields)&&l.shouldDirty&&v.state.next({name:t,dirtyFields:Ee(n,u),isDirty:F(t,c)})):d&&!d._f&&!T(c)?ae(t,c,l):I(t,c,l),Je(t,h)&&v.state.next({...r}),v.values.next({name:t,values:{...u}}),!x.mount&&i()},he=async t=>{const a=t.target;let l=a.name,d=!0;const f=y(o,l),c=()=>a.type?je(f._f):kt(t),m=w=>{d=Number.isNaN(w)||w===y(u,l,w)};if(f){let w,C;const H=c(),ee=t.type===$e.BLUR||t.type===$e.FOCUS_OUT,vt=!Ut(f._f)&&!s.resolver&&!y(r.errors,l)&&!f._f.deps||Mt(ee,y(r.touchedFields,l),r.isSubmitted,pe,U),we=Je(l,h,ee);k(u,l,H),ee?(f._f.onBlur&&f._f.onBlur(t),A&&A(0)):f._f.onChange&&f._f.onChange(t);const Fe=ie(l,H,ee,!1),xt=!M(Fe)||we;if(!ee&&v.values.next({name:l,type:t.type,values:{...u}}),vt)return S.isValid&&b(),xt&&v.state.next({name:l,...we?{}:Fe});if(!ee&&we&&v.state.next({...r}),R(!0),s.resolver){const{errors:Ke}=await P([l]);if(m(H),d){const bt=tt(r.errors,o,l),Ge=tt(Ke,o,bt.name||l);w=Ge.error,l=Ge.name,C=M(Ke)}}else w=(await et(f,u,fe,s.shouldUseNativeValidation))[l],m(H),d&&(w?C=!1:S.isValid&&(C=await p(o,!0)));d&&(f._f.deps&&Ve(f._f.deps),Y(l,C,w,Fe))}},Ue=(t,a)=>{if(y(r.errors,a)&&t.focus)return t.focus(),1},Ve=async(t,a={})=>{let l,d;const f=Se(t);if(R(!0),s.resolver){const c=await ye(N(t)?t:f);l=M(c),d=t?!f.some(m=>y(c,m)):l}else t?(d=(await Promise.all(f.map(async c=>{const m=y(o,c);return await p(m&&m._f?{[c]:m}:m)}))).every(Boolean),!(!d&&!r.isValid)&&b()):d=l=await p(o);return v.state.next({...!K(t)||S.isValid&&l!==r.isValid?{}:{name:t},...s.resolver||!t?{isValid:l}:{},errors:r.errors,isValidating:!1}),a.shouldFocus&&!d&&oe(o,Ue,t?f:h.mount),d},Me=t=>{const a={...n,...x.mount?u:{}};return N(t)?a:K(t)?y(a,t):t.map(l=>y(a,l))},Re=(t,a)=>({invalid:!!y((a||r).errors,t),isDirty:!!y((a||r).dirtyFields,t),isTouched:!!y((a||r).touchedFields,t),error:y((a||r).errors,t)}),yt=t=>{t&&Se(t).forEach(a=>O(r.errors,a)),v.state.next({errors:t?r.errors:{}})},Pe=(t,a,l)=>{const d=(y(o,t,{_f:{}})._f||{}).ref;k(r.errors,t,{...a,ref:d}),v.state.next({name:t,errors:r.errors,isValid:!1}),l&&l.shouldFocus&&d&&d.focus&&d.focus()},ht=(t,a)=>Z(t)?v.values.subscribe({next:l=>t(L(void 0,a),l)}):L(t,a,!0),ke=(t,a={})=>{for(const l of t?Se(t):h.mount)h.mount.delete(l),h.array.delete(l),a.keepValue||(O(o,l),O(u,l)),!a.keepError&&O(r.errors,l),!a.keepDirty&&O(r.dirtyFields,l),!a.keepTouched&&O(r.touchedFields,l),!s.shouldUnregister&&!a.keepDefaultValue&&O(n,l);v.values.next({values:{...u}}),v.state.next({...r,...a.keepDirty?{isDirty:F()}:{}}),!a.keepIsValid&&b()},Ie=({disabled:t,name:a,field:l,fields:d,value:f})=>{if(J(t)){const c=t?void 0:N(f)?je(l?l._f:y(d,a)._f):f;k(u,a,c),ie(a,c,!1,!1,!0)}},Ae=(t,a={})=>{let l=y(o,t);const d=J(a.disabled);return k(o,t,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:t}},name:t,mount:!0,...a}}),h.mount.add(t),l?Ie({field:l,disabled:a.disabled,name:t,value:a.value}):se(t,!0,a.value),{...d?{disabled:a.disabled}:{},...s.progressive?{required:!!a.required,min:le(a.min),max:le(a.max),minLength:le(a.minLength),maxLength:le(a.maxLength),pattern:le(a.pattern)}:{},name:t,onChange:he,onBlur:he,ref:f=>{if(f){Ae(t,a),l=y(o,t);const c=N(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,m=Lt(c),w=l._f.refs||[];if(m?w.find(C=>C===c):c===l._f.ref)return;k(o,t,{_f:{...l._f,...m?{refs:[...w.filter(Ne),c,...Array.isArray(y(n,t))?[{}]:[]],ref:{type:c.type,name:t}}:{ref:c}}}),se(t,!1,void 0,c)}else l=y(o,t,{}),l._f&&(l._f.mount=!1),(s.shouldUnregister||a.shouldUnregister)&&!(wt(h.array,t)&&x.action)&&h.unMount.add(t)}}},Be=()=>s.shouldFocusError&&oe(o,Ue,h.mount),mt=t=>{J(t)&&(v.state.next({disabled:t}),oe(o,(a,l)=>{let d=t;const f=y(o,l);f&&J(f._f.disabled)&&(d||(d=f._f.disabled)),a.disabled=d},0,!1))},qe=(t,a)=>async l=>{l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let d=z(u);if(v.state.next({isSubmitting:!0}),s.resolver){const{errors:f,values:c}=await P();r.errors=f,d=c}else await p(o);O(r.errors,"root"),M(r.errors)?(v.state.next({errors:{}}),await t(d,l)):(a&&await a({...r.errors},l),Be(),setTimeout(Be)),v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:M(r.errors),submitCount:r.submitCount+1,errors:r.errors})},gt=(t,a={})=>{y(o,t)&&(N(a.defaultValue)?Q(t,y(n,t)):(Q(t,a.defaultValue),k(n,t,a.defaultValue)),a.keepTouched||O(r.touchedFields,t),a.keepDirty||(O(r.dirtyFields,t),r.isDirty=a.defaultValue?F(t,y(n,t)):F()),a.keepError||(O(r.errors,t),S.isValid&&b()),v.state.next({...r}))},We=(t,a={})=>{const l=t?z(t):n,d=z(l),f=t&&!M(t)?d:n;if(a.keepDefaultValues||(n=l),!a.keepValues){if(a.keepDirtyValues||D)for(const c of h.mount)y(r.dirtyFields,c)?k(f,c,y(u,c)):Q(c,y(f,c));else{if(Ce&&N(t))for(const c of h.mount){const m=y(o,c);if(m&&m._f){const w=Array.isArray(m._f.refs)?m._f.refs[0]:m._f.ref;if(ge(w)){const C=w.closest("form");if(C){C.reset();break}}}}o={}}u=e.shouldUnregister?a.keepDefaultValues?z(n):{}:z(f),v.array.next({values:{...f}}),v.values.next({values:{...f}})}h={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!x.mount&&i(),x.mount=!S.isValid||!!a.keepIsValid,x.watch=!!e.shouldUnregister,v.state.next({submitCount:a.keepSubmitCount?r.submitCount:0,isDirty:a.keepDirty?r.isDirty:!!(a.keepDefaultValues&&!X(t,n)),isSubmitted:a.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:a.keepDirtyValues?r.dirtyFields:a.keepDefaultValues&&t?Ee(n,t):{},touchedFields:a.keepTouched?r.touchedFields:{},errors:a.keepErrors?r.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},He=(t,a)=>We(Z(t)?t(u):t,a);return{control:{register:Ae,unregister:ke,getFieldState:Re,handleSubmit:qe,setError:Pe,_executeSchema:P,_getWatch:L,_getDirty:F,_updateValid:b,_removeUnmounted:V,_updateFieldArray:G,_updateDisabledField:Ie,_getFieldArray:W,_reset:We,_resetDefaultValues:()=>Z(s.defaultValues)&&s.defaultValues().then(t=>{He(t,s.resetOptions),v.state.next({isLoading:!1})}),_updateFormState:t=>{r={...r,...t}},_disableForm:mt,_subjects:v,_proxyFormState:S,_setErrors:de,get _fields(){return o},get _formValues(){return u},get _state(){return x},set _state(t){x=t},get _defaultValues(){return n},get _names(){return h},set _names(t){h=t},get _formState(){return r},set _formState(t){r=t},get _options(){return s},set _options(t){s={...s,...t}}},trigger:Ve,register:Ae,handleSubmit:qe,watch:ht,setValue:Q,getValues:Me,reset:He,resetField:gt,clearErrors:yt,unregister:ke,setError:Pe,setFocus:(t,a={})=>{const l=y(o,t),d=l&&l._f;if(d){const f=d.refs?d.refs[0]:d.ref;f.focus&&(f.focus(),a.shouldSelect&&f.select())}},getFieldState:Re}}function Bt(e={}){const i=B.useRef(),s=B.useRef(),[r,o]=B.useState({isDirty:!1,isValidating:!1,isLoading:Z(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:e.errors||{},disabled:!1,defaultValues:Z(e.defaultValues)?void 0:e.defaultValues});i.current||(i.current={...It(e,()=>o(u=>({...u}))),formState:r});const n=i.current.control;return n._options=e,Nt({subject:n._subjects.state,next:u=>{Dt(u,n._proxyFormState,n._updateFormState,!0)&&o({...n._formState})}}),B.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),B.useEffect(()=>{if(n._proxyFormState.isDirty){const u=n._getDirty();u!==r.isDirty&&n._subjects.state.next({isDirty:u})}},[n,r.isDirty]),B.useEffect(()=>{e.values&&!X(e.values,s.current)?(n._reset(e.values,n._options.resetOptions),s.current=e.values,o(u=>({...u}))):n._resetDefaultValues()},[e.values,n]),B.useEffect(()=>{e.errors&&n._setErrors(e.errors)},[e.errors,n]),B.useEffect(()=>{n._state.mount||(n._updateValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),i.current.formState=St(r,n),i.current}var rt=function(e,i,s){if(e&&"reportValidity"in e){var r=y(s,i);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},dt=function(e,i){var s=function(o){var n=i.fields[o];n&&n.ref&&"reportValidity"in n.ref?rt(n.ref,o,e):n.refs&&n.refs.forEach(function(u){return rt(u,o,e)})};for(var r in i.fields)s(r)},qt=function(e,i){i.shouldUseNativeValidation&&dt(e,i);var s={};for(var r in e){var o=y(i.fields,r),n=Object.assign(e[r]||{},{ref:o&&o.ref});if(Ht(i.names||Object.keys(e),r)){var u=Object.assign({},Wt(y(s,r)));k(u,"root",n),k(s,r,u)}else k(s,r,n)}return s},Wt=function(e){return Array.isArray(e)?e.filter(Boolean):[]},Ht=function(e,i){return e.some(function(s){return s.startsWith(i+".")})};function Kt(e,i,s){return i===void 0&&(i={}),s===void 0&&(s={}),function(r,o,n){try{return Promise.resolve(function(u,x){try{var h=(i.context,Promise.resolve(e[s.mode==="sync"?"validateSync":"validate"](r,Object.assign({abortEarly:!1},i,{context:o}))).then(function(A){return n.shouldUseNativeValidation&&dt({},n),{values:s.raw?r:A,errors:{}}}))}catch(A){return x(A)}return h&&h.then?h.then(void 0,x):h}(0,function(u){if(!u.inner)throw u;return{values:{},errors:qt((x=u,h=!n.shouldUseNativeValidation&&n.criteriaMode==="all",(x.inner||[]).reduce(function(A,_){if(A[_.path]||(A[_.path]={message:_.message,type:_.type}),h){var S=A[_.path].types,v=S&&S[_.type];A[_.path]=at(_.path,h,A,_.type,v?[].concat(v,_.message):_.message)}return A},{})),n)};var x,h}))}catch(u){return Promise.reject(u)}}}function Qt(e){const[i,s]=ne.useState(!1),[r,o]=ne.useState([]),n=ne.useMemo(()=>new Worker(new URL("/yt-music-now-playing/assets/image-processor--GlWCFZ_.js",import.meta.url)),[]);ne.useEffect(()=>{const D=U=>{o(U.data),s(!1)};return n.addEventListener("message",D),()=>n.removeEventListener("message",D)});const u=D=>{D.target.files&&(o([]),A("colors",[]),A("imgUrl",URL.createObjectURL(D.target.files[0])),s(!0),n.postMessage(D.target.files[0]))},{handleSubmit:x,register:h,setValue:A,watch:_,formState:{isValid:S}}=Bt({defaultValues:{imgUrl:"",title:"",artist:"",colors:[],liked:!0,likeUnit:"K",likeCount:40,commentCount:0,playState:!0,loopState:!0,timeMin:0,timeSec:0,elapsed:10},resolver:Kt(Vt)}),v=D=>{sessionStorage.setItem("configuration",JSON.stringify(D)),e.onComfigurated()};return g.jsxs("form",{onSubmit:x(v),noValidate:!0,className:"configurator",children:[g.jsx("input",{type:"file",className:"d-none",id:"fileInput",onChange:u}),g.jsxs("label",{className:`btn btn-sm btn-warning shadow-sm d-block ${i?"pe-none opacity-50":""}`,htmlFor:"fileInput",children:[r.length>0?"Change":"Select"," Album Cover"]}),i&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"d-flex gap-1 align-items-center text-primary",children:[g.jsx(pt,{size:16,className:"spin"}),g.jsx("p",{className:"py-2 mb-0",children:"Generating Palette:"})]}),g.jsx("p",{className:"text-muted small",children:"This may take a while depending on the image size. Please fill other information in the meantime."})]}),g.jsxs("div",{className:"d-flex flex-column gap-2 mt-2",children:[r.length>0&&g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"mb-0",children:"Select 2 colors:"}),g.jsx("div",{className:"d-flex gap-2 pb-2",children:r.map(D=>g.jsx("label",{htmlFor:D,className:"color-checkbox",style:{padding:"0.5rem",backgroundColor:D,borderRadius:"0.5rem"},children:ne.createElement("input",{type:"checkbox",...h("colors"),id:D,value:D,key:D})}))})]}),g.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Song Title",...h("title")}),g.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Artist Name",...h("artist")}),g.jsxs("div",{className:"form-check form-switch",children:[g.jsx("input",{className:"form-check-input",type:"checkbox",checked:_("playState"),...h("playState")}),g.jsx("span",{className:"form-check-label",children:_("playState")?"Playing":"Paused"})]}),g.jsxs("div",{className:"form-check form-switch",children:[g.jsx("input",{className:"form-check-input",type:"checkbox",checked:_("loopState"),...h("loopState")}),g.jsx("span",{className:"form-check-label",children:_("loopState")?"Looping Current":"Loop Off"})]}),g.jsx("div",{className:"my-2",children:"Song Duration"}),g.jsxs("div",{className:"d-flex gap-2",children:[g.jsx("input",{type:"number",className:"form-control form-control-sm flex-grow-1",placeholder:"Min.",...h("timeMin")}),g.jsx("input",{type:"number",className:"form-control form-control-sm flex-grow-1",placeholder:"Sec.",...h("timeSec")})]}),g.jsxs("label",{htmlFor:"elapsed",className:"form-label mb-0",children:["Elapsed (",_t(_("timeMin").toString(),_("timeSec").toString(),_("elapsed")),")"]}),g.jsx("input",{type:"range",className:"form-range",id:"elapsed",step:1,...h("elapsed")}),g.jsx("div",{className:"mt-2",children:"Likes"}),g.jsxs("div",{className:"form-check form-switch mb-0",children:[g.jsx("input",{className:"form-check-input",type:"checkbox",checked:_("liked"),...h("liked")}),g.jsx("span",{className:"form-check-label",children:_("liked")?"Liked":"Not Liked"})]}),g.jsxs("div",{className:"row",children:[g.jsx("div",{className:"col-8",children:g.jsx("input",{className:"form-control form-control-sm",type:"number",...h("likeCount")})}),g.jsx("div",{className:"col-4",children:g.jsxs("select",{...h("likeUnit"),className:"form-select form-select-sm",children:[g.jsx("option",{value:"K",children:"K (thousands)"}),g.jsx("option",{value:"M",children:"M (millions)"})]})})]}),g.jsx("div",{className:"mt-2",children:"Comments"}),g.jsx("input",{className:"form-control form-control-sm",type:"number",...h("commentCount")}),g.jsx("button",{type:"submit",className:"btn btn-sm btn-success text-light w-100 mt-2",disabled:!S,children:"Create Page"})]})]})}export{Qt as default};
